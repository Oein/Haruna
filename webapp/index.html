<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NS Pro Controller - Gamepad Serial Bridge</title>
    <link rel="stylesheet" href="./css.css" />
  </head>
  <body>
    <div class="container">
      <div class="control-panel">
        <!-- Serial Connection -->
        <div class="card">
          <h3>Serial Connection</h3>
          <div class="status-indicator">
            <div class="status-dot" id="serialStatus"></div>
            <span class="status-text" id="serialText">Not connected</span>
          </div>
          <button id="connectBtn">Connect Serial Port</button>
          <button id="disconnectBtn" disabled class="danger">Disconnect</button>

          <div class="log" id="seriallog"></div>
        </div>

        <!-- Buttons Display -->
        <div class="card">
          <h3>Button Status</h3>
          <div class="button-grid">
            <div class="button-display" data-btn="0" title="Y">Y</div>
            <div class="button-display" data-btn="1" title="B">B</div>
            <div class="button-display" data-btn="2" title="A">A</div>
            <div class="button-display" data-btn="3" title="X">X</div>
            <div class="button-display" data-btn="4" title="LB">LB</div>
            <div class="button-display" data-btn="5" title="RB">RB</div>
            <div class="button-display" data-btn="6" title="LT">LT</div>
            <div class="button-display" data-btn="7" title="RT">RT</div>
            <div class="button-display" data-btn="8" title="Back">Back</div>
            <div class="button-display" data-btn="9" title="Start">Start</div>
            <div class="button-display" data-btn="10" title="LS">LS</div>
            <div class="button-display" data-btn="11" title="RS">RS</div>
          </div>

          <div class="row-2">
            <!-- D-Pad -->
            <div style="margin-top: 12px">
              <div style="font-size: 11px; color: #999; margin-bottom: 8px">
                D-Pad:
              </div>
              <div class="dpad-display">
                <div></div>
                <div class="dpad-btn" id="dpad-up" title="Up">↑</div>
                <div></div>
                <div class="dpad-btn" id="dpad-left" title="Left">←</div>
                <div></div>
                <div class="dpad-btn" id="dpad-right" title="Right">→</div>
                <div></div>
                <div class="dpad-btn" id="dpad-down" title="Down">↓</div>
                <div></div>
              </div>
            </div>

            <!-- Analog Sticks -->
            <div style="margin-top: 12px">
              <div style="font-size: 11px; color: #999; margin-bottom: 8px">
                Analog Sticks:
              </div>
              <div class="stick-display">
                <div class="stick-container">
                  <div class="stick">
                    <div class="stick-dot" id="leftStick"></div>
                    <div class="stick-label">Left</div>
                  </div>
                </div>
                <div class="stick-container">
                  <div class="stick">
                    <div class="stick-dot" id="rightStick"></div>
                    <div class="stick-label">Right</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Debug Log -->
        <div class="card">
          <h3>Debug Log</h3>
          <div class="log" id="log"></div>
        </div>

        <div class="full-grid row-2">
          <!-- Replay Controls -->
          <div class="card">
            <h3>Replay Controls</h3>
            <div
              style="
                display: flex;
                gap: 10px;
                margin-bottom: 10px;
                flex-wrap: wrap;
              "
            >
              <button id="recordBtn">Record</button>
              <button id="stopBtn" disabled>Stop</button>
              <button id="saveReplayBtn" disabled>Save Replay</button>
              <button id="stopReplayBtn" disabled>Stop Replay</button>
              <button id="exportBtn">Export</button>
              <button id="importBtn">Import</button>
              <input
                type="file"
                id="importFile"
                accept="application/json"
                style="display: none"
              />
            </div>
            <div>
              <div class="status-percentage">
                <div class="percentage-label">Replay Status</div>
                <div class="percentage-bar">
                  <div
                    class="percentage-fill"
                    id="replayTimeFill"
                    style="
                      width: 0%;
                      background: linear-gradient(
                        90deg,
                        #eabc66 0%,
                        #a27c4b 100%
                      );
                    "
                  ></div>
                  <div
                    class="percentage-fill"
                    id="replayPercentageFill"
                    style="width: 0%"
                  ></div>
                  <div class="percentage-text" id="replayPercentageText">
                    0%
                  </div>
                </div>
              </div>
            </div>
            <div id="replayList"></div>
          </div>

          <!-- Script Controls -->
          <div class="card ifwrap">
            <h3>Script Controls</h3>
            <div id="scriptContainer"></div>
            <div id="iframeContainer"></div>
          </div>
        </div>
      </div>
    </div>

    <script src="./index.js"></script>
  </body>
</html>
